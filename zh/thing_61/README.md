#一个二进制

我见过几个项目，在这些项目中，构建重写了代码的某些部分，以便为每个目标环境生成定制的二进制代码。这总是使事情变得比应有的更复杂，并带来团队在每个安装上可能没有一致的版本的风险。至少，它涉及构建软件的多个几乎相同的副本，然后必须将每个副本部署到正确的位置。这意味着更多的活动部件，这意味着更多的机会犯错误。

我曾经在一个团队工作过，在这个团队中，每个属性更改都必须在完整的构建周期内签入，所以每当测试人员需要进行微小调整时，他们都会等待(我有没有提到构建也需要太长时间？)。我还在一个团队中工作过，在该团队中，系统管理员坚持为生产重新构建(使用与我们相同的脚本)，这意味着我们无法证明生产中的版本是经过测试的版本。诸若此类。

规则很简单：*构建一个可以在发布管道中的所有阶段识别和升级的单一二进制文件。*在环境中保留特定于环境的详细信息。例如，这可能意味着将它们保存在组件容器、已知文件或路径中。

如果您的团队有一个乱七八糟的代码构建或将所有目标设置与代码一起存储，这表明没有人仔细考虑过设计，将那些应用程序的核心功能和那些特定于平台的功能分开。或者情况可能更糟：团队知道该做什么，但不能确定做出改变的努力的优先顺序。

当然，也有例外：您可能正在为具有显著不同资源约束的目标进行构建，但这并不适用于我们大多数编写“数据库到屏幕再返回”应用程序的人。或者，你可能生活在一些遗留下来的烂摊子中，这些烂摊子现在太难修复了。在这种情况下，你必须循序渐进--但要尽快开始。

还有一件事：也要保持环境信息的版本。没有什么比破坏环境配置而又找不到更改的地方更糟糕的了。环境信息的版本应该与代码分开，因为它们会以不同的速率和不同的原因进行更改。一些团队为此使用分布式版本控制系统(如bazaar和git)，因为它们可以更容易地将生产环境中所做的更改推送回存储库(这是不可避免的)。

作者：[Steve Freeman](http://programmer.97things.oreilly.com/wiki/index.php/Steve_Freeman)