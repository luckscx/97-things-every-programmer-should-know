#自动化您的编码标准

你可能也去过那里。在项目开始时，每个人都有很多好的意图--称之为“新项目的决心”。通常，这些决议中的许多都被写在文件中。关于代码的那些最终会出现在项目的编码标准中。在启动会议期间，首席开发人员通读文档，在最好的情况下，每个人都同意他们将努力遵循这些文档。然而，一旦该项目开始实施，这些良好的意图就会被逐一放弃。当项目最终交付时，代码看起来一团糟，似乎没有人知道它是如何变成这样的。

事情是什么时候出问题的？可能已经在启动会议上了。一些项目成员没有注意到这一点。其他人则不理解这一点。更糟糕的是，一些人不同意，并已经在计划他们的编码标准叛逆。最后，一些人明白了这一点并同意了，但当项目中的压力太大时，他们不得不放手。格式良好的代码不会为您赢得想要更多功能的客户的支持。此外，如果不是自动化的，遵循编码标准可能是一项相当枯燥的任务。只需尝试手动缩进一个杂乱无章的类，自己找出答案。

但如果这是一个问题，为什么我们一开始就想要有一个编码标准呢？以统一的方式格式化代码的一个原因是，这样任何人都不能仅仅通过以他或她的私人方式格式化代码来“拥有”它。我们可能希望阻止开发人员使用某些反模式，以避免一些常见的错误。总而言之，编码标准应该使项目中的工作变得更容易，并自始至终保持开发速度。因此，每个人都应该就编码标准达成一致--如果一个开发人员使用三个空格来缩进代码，而另一个开发人员使用四个空格来缩进代码，这是没有帮助的。

有很多工具可用于生成代码质量报告、记录和维护编码标准，但这并不是解决方案的全部。它应该是自动化的，并在可能的情况下执行。以下是几个例子：

-确保代码格式化是构建过程的一部分，以便每个人在每次编译代码时都自动运行它。
-使用静态代码分析工具扫描代码以查找不需要的反模式。如果找到任何版本，则中断构建。
-学习配置这些工具，以便您可以扫描您自己的特定于项目的反模式。
-不仅要测量测试覆盖率，还要自动检查结果。同样，如果测试覆盖率太低，请中断构建。

在你认为重要的事情上，试着这样做。你不可能把你真正关心的一切都自动化。对于不能自动标记或修复的东西，可以将它们视为自动编码标准的补充指南，但接受您和您的同事可能不会那么勤奋地遵循它们。

最后，编码标准应该是动态的，而不是静态的。随着项目的发展，项目的需求发生了变化，最初看起来很聪明的东西，几个月后就不一定是聪明的了。

作者：Filip van Laenen](http://programmer.97things.oreilly.com/wiki/index.php/Filip_van_Laenen)