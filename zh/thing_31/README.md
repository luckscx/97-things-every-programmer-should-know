# 别碰那代码！

我们每个人都曾经历过这样的时刻。你的代码被部署到预发布服务器上进行系统测试，测试经理反馈说她遇到了问题。你的第一反应是：“快，让我来修复它——我知道问题出在哪里。”

但从更广泛的角度来看，真正的问题在于，作为开发者，你认为自己应该有权访问预发布服务器。

在大多数基于Web的开发环境中，架构可以这样分解：

- 开发者的本地机器上进行本地开发和单元测试
- 开发服务器上进行手动或自动化的集成测试
- 预发布服务器上，QA团队和用户进行验收测试
- 生产服务器

当然，中间还穿插着其他服务器和服务，比如源代码控制和问题跟踪系统，但你明白我的意思。在这种模式下，开发者——即使是高级开发者——也不应该拥有超越开发服务器的访问权限。大多数开发工作都是在开发者的本地机器上完成的，使用他们最喜欢的IDE、虚拟机，以及适量的“黑魔法”来祈求好运。

一旦代码被提交到源代码控制系统（SCC），无论是自动还是手动，它都应该被推送到开发服务器上，进行必要的测试和调整，以确保所有部分都能协同工作。但从这一刻起，开发者就变成了这个过程的旁观者。

预发布经理应该将代码打包并推送到预发布服务器上，供QA团队测试。就像开发者不需要访问开发服务器以外的任何东西一样，QA团队和用户也不需要触碰开发服务器上的任何东西。如果代码已经准备好进行验收测试，那就发布一个版本并推送，而不是让用户“快速看一下”开发服务器上的内容。记住，除非你是一个人独自开发项目，否则其他开发者也在那里有代码，他们可能还没准备好让用户看到。发布经理是唯一一个应该同时拥有访问权限的人。

在任何情况下——绝对不要——开发者都不应该拥有生产服务器的访问权限。如果出现问题，你的支持团队应该要么自己修复，要么请求你修复。在代码被提交到SCC后，他们会从那里推送一个补丁。我参与过的一些最大的编程灾难，就是因为有人（咳咳，就是我）违反了这条规则。如果出了问题，生产环境绝不是修复它的地方。

作者：[Cal Evans](http://programmer.97things.oreilly.com/wiki/index.php/Cal_Evans)