# 代码审查

你应该进行代码审查。为什么？因为它们*提高代码质量*并*降低缺陷率*。但原因可能并非你所想的那样。

由于之前可能有过一些不愉快的审查经历，许多程序员往往不喜欢代码审查。我曾见过一些组织要求所有代码在部署到生产环境之前必须通过正式审查。通常是由架构师或首席开发人员进行审查，这种做法可以描述为*架构师审查一切*。这在他们软件开发过程手册中有明确规定，因此程序员必须遵守。可能有些组织需要如此严格和正式的过程，但大多数组织并不需要。在大多数组织中，这种方法会适得其反。被审查者可能会觉得自己在被假释委员会审判。审查者既需要时间阅读代码，又需要时间跟上系统的所有细节。审查者很快就会成为这个过程中的瓶颈，过程也会迅速恶化。

代码审查的目的不应仅仅是纠正代码中的错误，而应是*分享知识*并建立共同的编码准则。与其他程序员分享你的代码可以实现集体代码所有权。让一个随机的团队成员与团队其他成员一起*走查代码*。与其寻找错误，你应该通过尝试学习和理解代码来进行审查。

在代码审查中要温和。确保评论是*建设性的，而不是刻薄的*。在审查会议中引入不同的*审查角色*，以避免团队成员之间的组织层级影响代码审查。例如，可以让一个审查者专注于文档，另一个专注于异常处理，第三个则关注功能实现。这种方法有助于将审查负担分散到团队成员之间。

每周安排一个固定的*代码审查日*。在审查会议上花费几个小时。每次会议以简单的轮换方式更换被审查者。记得每次审查会议也要在团队成员之间切换角色。*让新手参与*代码审查。他们可能经验不足，但他们新鲜的大学知识可以提供不同的视角。*让专家参与*，因为他们有经验和知识。他们会更快、更准确地识别出容易出错的代码。如果团队有由工具检查的*编码规范*，代码审查会更加顺利。这样，代码格式问题就不会在代码审查会议上讨论。

*让代码审查变得有趣*可能是成功的最重要因素。审查是关于审查的人。如果审查会议痛苦或乏味，就很难激励任何人。让它成为一个*非正式的代码审查*，其主要目的是在团队成员之间分享知识。把讽刺的评论留在外面，带上一块蛋糕或自带午餐吧。

作者：[Mattias Karlsson](http://programmer.97things.oreilly.com/wiki/index.php/Mattias_Karlsson)