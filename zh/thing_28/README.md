#不要把你的程序钉在直立的位置上

我曾经写过一个恶作剧的C++测验，在其中我讽刺地建议了以下异常处理策略：

>通过在我们的代码库中使用大量的`try...catch`构造，我们有时能够防止应用程序中止。我们认为结果状态就是“把身体钉在直立的位置上”。

尽管我轻描淡写，但我实际上是在总结我在Dame痛苦经历中得到的教训。

它是我们自己自制的C++库中的一个基本应用程序类。多年来，它遭受了许多程序员的指尖：没有人的手是干净的。它包含用于处理所有其他异常中的所有逃逸异常的代码。在第22条军规中，我们决定，或者更确切地说，感觉(*决定*暗示着比构建这个怪物更多的想法)，这个类的实例应该永远活着，或者在尝试中死亡。

为此，我们交织了多个异常处理程序。我们将Windows的结构化异常处理与本机异常处理混合在一起(还记得C++中的`__Try...__Exept`吗？我也是)。当事情出乎意料地发生时，我们试图再次给他们打电话，更努力地按下参数。回过头来看，我喜欢这样想，当在另一个语句的Catch子句中编写一个内部的‘try...catch’句柄时，我突然意识到，我可能不小心从良好练习的高速公路上走上了一条小路，进入了芳香却不健康的疯人院。然而，这可能是追溯性的智慧。

不用说，每当基于这个类的应用程序出现问题时，它们就会像码头上的黑手党受害者一样消失，没有留下任何有用的气泡痕迹来表明地狱发生了什么，尽管据说调用了转储例程来记录这场灾难。最终--很长一段时间--我们对自己的所作所为进行了总结，并感到羞愧。我们用一个最低限度和强大的报告机制取代了整个混乱。但这是后来发生的多次撞车事故。

我不会为这件事打扰你--因为肯定没有人会像我们这样愚蠢--要不是因为我最近在网上和一个家伙发生了争执，他的学术头衔宣称他应该知道得更清楚。我们正在讨论远程事务中的Java代码。如果代码失败，他认为，它应该捕捉并阻止异常*就地。(“然后用它做什么？”我问过了。“把它煮成晚餐？”

他引用了用户界面设计师的规则：永远不要让用户看到异常报告，就好像这解决了问题一样，大写字母和一切都是这样的。我想知道，他是否对其中一台蓝屏自动取款机的代码负责，这些自动取款机的照片装饰着较弱的博客，并受到了永久性的创伤。
无论如何，如果你遇到他，当你侧身走向门口时，点头微笑，不要理睬他。

作者：[Verity Stob](http://programmer.97things.oreilly.com/wiki/index.php/Verity_Stob)