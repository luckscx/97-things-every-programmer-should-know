#详细记录会扰乱您的睡眠

当我遇到一个已经开发或生产了一段时间的系统时，真正出现问题的第一个迹象总是脏日志。我想你知道我在说什么。当点击网页上的正常流上的单个链接时，会在系统提供的唯一日志中产生大量消息。过多的日志记录可能与根本没有日志记录一样无用。

如果你的系统和我的一样，当你的工作完成时，别人的工作才刚刚开始。该系统开发完成后，有望在为客户服务的过程中长盛不衰。如果你够幸运的话。当系统处于生产状态时，您如何知道是否出现问题，以及如何处理？

也许有人会帮你监控你的系统，也可能你会自己监控。无论哪种方式，日志都可能是监控的一部分。如果出现了一些事情，你必须被叫醒去处理它，你要确保它有一个很好的理由。如果我的系统快死了，我想知道。但如果只是打嗝，我宁愿享受我的美容睡眠。

对于许多系统，出现问题的第一个指示是将日志消息写入某个日志。大多数情况下，这将是错误日志。所以帮你自己一个忙：确保从第一天起，如果错误日志中记录了什么，你愿意让人在半夜打电话叫醒你。如果您可以在系统测试期间模拟系统上的负载，那么查看无噪音的错误日志也是系统相当健壮的第一个良好迹象。如果不是的话，也可以提前发出警告。

分布式系统增加了另一个级别的复杂性。您必须决定如何处理外部依赖失败。如果您的系统是非常分布式的，这可能是常见的情况。确保您的日志记录策略考虑到这一点。

一般来说，一切正常的最佳指示是优先级较低的消息正在愉快地运行。我希望每个重要的应用程序事件都有一条信息级日志消息。

杂乱无章的日志表明，一旦投入生产，系统将很难控制。如果您不希望在错误日志中显示任何内容，那么知道在出现某些内容时要做什么将会容易得多。

作者：[Johannes Brodwall](http://programmer.97things.oreilly.com/wiki/index.php/Johannes_Brodwall)