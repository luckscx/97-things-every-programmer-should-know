#不要害怕打碎东西

毫无疑问，每个有行业经验的人都曾在代码库充其量是不稳定的项目中工作过。这个系统的因子化程度很低，改变一件事情总是会破坏另一项无关的功能。每当添加模块时，程序员的目标是尽可能少地更改，并在每次发布过程中屏住呼吸。这是相当于在摩天大楼里用工字梁玩Jenga的软件，注定会发生灾难。

做出改变之所以如此令人伤脑筋，是因为这个系统病了。它需要医生，否则它的情况只会变得更糟。你已经知道你的系统出了什么问题，但你害怕打破鸡蛋做你的煎蛋卷。一个熟练的外科医生知道为了手术必须进行割伤，但熟练的外科医生也知道割伤是暂时的，会痊愈的。手术的最终结果是值得最初的痛苦的，患者应该会愈合到比手术前更好的状态。

不要害怕你的代码。谁会在乎在你搬运东西的时候东西会不会暂时坏掉呢？对变化的恐惧让你的项目一开始就陷入了这种状态。在项目的生命周期中，投入时间进行重构将会有好几倍的回报。一个额外的好处是，您的团队处理病态系统的经验使您都是了解它“应该”如何工作的专家。应用这些知识，而不是怨恨它。在你讨厌的系统上工作，不是任何人都应该如何消磨时间的。

重新定义内部接口、重构模块、重构复制粘贴的代码，并通过减少依赖项来简化设计。您可以通过消除角例来显著降低代码复杂性，角例通常是由不正确耦合的功能引起的。慢慢地将旧结构过渡到新结构，并在此过程中进行测试。试图在“一次大爆炸”中完成一次大的重构将会导致足够多的问题，使您考虑中途放弃整个工作。

做一名外科医生，敢于切除病变部位，为治愈腾出空间。这种态度是有感染力的，将激励其他人开始致力于他们一直推迟的清理项目。将团队认为对项目的整体利益有价值的任务列在一个“卫生”清单上。让管理层相信，尽管这些任务可能不会产生明显的结果，但它们将减少费用并加快未来的发布。永远不要停止关心代码的总体“健康”。

作者：[Mike Lewis](http://programmer.97things.oreilly.com/wiki/index.php/Mike_Lewis)