#不要重复你自己#

在编程的所有原则中，不要重复自己(Dry)可能是最基本的原则之一。该原则是由Andy Hunt和Dave Thomas在《实用程序员》一书中提出的，并且是许多其他著名的软件开发最佳实践和设计模式的基础。学会识别重复并了解如何通过适当的实践和适当的抽象消除重复的开发人员，可以比不断通过不必要的重复感染应用程序的开发人员生成更干净的代码。

复制是浪费


进入应用程序的每一行代码都必须维护，这是未来错误的潜在来源。复制不必要地膨胀了代码库，导致了更多的错误机会，并意外地增加了系统的复杂性。重复给系统增加的臃肿也使使用系统的开发人员更难完全理解整个系统，或者确保在一个位置所做的更改不需要在复制他们正在工作的逻辑的其他地方也进行。DRY要求“每一条知识在一个系统中都必须有一个单一的、明确的、权威的表述”。

流程中的重复需要自动化


软件开发中的许多过程都是重复性的，很容易实现自动化。DRY原则适用于这些上下文以及应用程序的源代码。手动测试速度慢、容易出错，并且很难重复，因此如果可能的话，应该使用自动化测试套件。如果手动集成软件，可能会耗时且容易出错，因此构建过程应该尽可能频繁地运行，最好是在每次签入时运行。只要存在可以自动化的痛苦的手动过程，就应该实现自动化和标准化。我们的目标是确保只有一种方法来完成这项任务，而且尽可能地无痛。

逻辑上的重复需要抽象


逻辑上的重复可以有多种形式。复制粘贴*IF-THEN*或*Switch-Case*逻辑是最容易检测和纠正的逻辑之一。许多设计模式的明确目标是减少或消除应用程序中的逻辑重复。如果一个对象在使用之前通常需要发生几件事，这可以通过Abstract Factory或Factory方法来完成。如果对象的行为有许多可能的变化，则可以使用Strategy模式注入这些行为，而不是使用大型的*If-Then*结构。事实上，设计模式本身的形成是为了减少解决常见问题和讨论此类解决方案所需的重复工作。此外，DRY还可以应用于数据库模式等结构，从而实现标准化。

这是一个原则问题


其他软件原理也与DRY相关。只适用于代码的函数行为的一次且仅一次原则可以被认为是DRY的子集。开放/关闭原则指出“软件实体应该对扩展开放，但对修改关闭”，只有在遵循DRY的情况下才能在实践中发挥作用。同样，众所周知的单一责任制原则要求一个班级只有一个改变的理由，依赖于枯燥。

当遵循结构、逻辑、过程和功能时，Dry原则为软件开发人员提供基本指导，并帮助创建更简单、更可维护、更高质量的应用程序。虽然在某些情况下，可能需要重复以满足性能或其他要求(例如，数据库中的数据非规范化)，但只有在直接解决实际问题而不是想象中的问题时才应使用重复。

作者：[Steve Smith](http://programmer.97things.oreilly.com/wiki/index.php/Steve_Smith)