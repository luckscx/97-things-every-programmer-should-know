#充分利用代码分析工具

测试的价值是从软件开发人员编程之旅的早期阶段就灌输给他们的东西。近年来，随着单元测试、测试驱动的开发和敏捷方法的兴起，人们对在开发周期的所有阶段充分利用测试的兴趣激增。然而，测试只是您可以用来提高代码质量的众多工具之一。

回到时间的迷雾中，当C还是一个新现象时，CPU时间和任何类型的存储都是宝贵的。第一批C编译器注意到了这一点，因此通过删除一些语义分析来减少通过代码的次数。这意味着编译器只检查在编译时可以检测到的一小部分错误。为了弥补这一缺陷，Stephen Johnson编写了一个名为*lint*的工具--它将代码中的绒毛去掉--该工具实现了一些从其姊妹C编译器中删除的静态分析。然而，静态分析工具因给出大量的假阳性警告和关于风格约定的警告而声名狼藉，而这些警告并不总是必须遵循。

当前的语言、编译器和静态分析工具是非常不同的。内存和CPU时间现在相对较少，因此编译器可以检查更多的错误。几乎每种语言都至少有一个工具可以检查违反样式指南的情况、常见的陷阱，有时还检查难以捕获的狡猾错误，例如潜在的空指针取消引用。更复杂的工具(如用于C的Splint或用于Python的Pylint)是可配置的，这意味着您可以通过配置文件、通过命令行开关或在您的IDE中选择工具发出的错误和警告。Splint甚至可以让你在注释中注释代码，以便更好地提示你的程序是如何工作的。

如果所有其他方法都失败了，并且您发现自己在寻找编译器、IDE或LINT工具无法捕获的简单错误或违反标准的情况，那么您始终可以使用自己的静态检查器。这并不像听起来那么困难。大多数语言，尤其是那些打着“动态”标签的语言，都将抽象语法树和编译器工具作为标准库的一部分公开。非常有必要了解您所使用的语言的开发团队所使用的标准库的一角，因为它们通常包含对静态分析和动态测试有用的隐藏宝石。例如，Python标准库包含一个反汇编程序，它告诉您用于生成某些编译代码或代码对象的字节码。对于python-dev团队中的编译器编写人员来说，这听起来像是一个鲜为人知的工具，但它在日常情况下却出人意料地有用。这个库可以反汇编的一件事是您的最后一个堆栈跟踪，它为您提供反馈，确切地说明哪条字节码指令抛出了最后一个未捕获的异常。

因此，不要让测试成为您质量保证的终点--利用分析工具，不要害怕使用自己的分析工具。

作者：[Sarah Mount](http://programmer.97things.oreilly.com/wiki/index.php/Sarah_Mount)