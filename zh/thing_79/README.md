# 利用代码分析工具

测试的价值在软件开发者的编程旅程早期就被反复强调。近年来，随着单元测试、测试驱动开发和敏捷方法的兴起，人们越来越重视在整个开发周期中充分利用测试。然而，测试只是众多可以用来提高代码质量的工具之一。

在很久以前，C语言还是一个新兴事物时，CPU时间和任何形式的存储都非常宝贵。早期的C编译器考虑到这一点，因此通过移除一些语义分析来减少对代码的遍历次数。这意味着编译器只检查了一小部分可以在编译时检测到的错误。为了弥补这一点，Stephen Johnson编写了一个名为*lint*的工具——它可以去除代码中的冗余——实现了一些从其姊妹C编译器中移除的静态分析功能。然而，静态分析工具因产生大量误报警告和关于风格规范的警告而声名狼藉，而这些规范并不总是必须遵循的。

如今的语言、编译器和静态分析工具的情况已经大不相同。内存和CPU时间现在相对便宜，因此编译器可以承担起检查更多错误的责任。几乎每种语言都至少有一个工具来检查违反风格指南、常见陷阱以及有时难以捕捉的狡猾错误，例如潜在的空指针解引用。更复杂的工具，如用于C语言的Splint或用于Python的Pylint，是可配置的，这意味着你可以通过配置文件、命令行开关或在IDE中选择工具发出的错误和警告。Splint甚至允许你在注释中为代码添加注解，以便更好地提示程序的工作原理。

如果所有其他方法都失败了，而你发现自己正在寻找编译器、IDE或lint工具未捕获的简单错误或违反标准的情况，那么你总是可以自己编写一个静态检查器。这并不像听起来那么困难。大多数语言，特别是那些标榜为*动态*的语言，将它们的抽象语法树和编译器工具作为标准库的一部分公开。深入了解你所使用语言的开发团队所使用的标准库的冷门角落是非常值得的，因为这些库通常包含对静态分析和动态测试有用的隐藏宝藏。例如，Python标准库包含一个反汇编器，它可以告诉你用于生成某些编译代码或代码对象的字节码。这听起来像是为python-dev团队的编译器编写者准备的晦涩工具，但实际上在日常情况下非常有用。这个库可以反汇编你最后的堆栈跟踪，为你提供关于究竟是哪个字节码指令抛出了最后一个未捕获异常的反馈。

所以，不要让测试成为你质量保证的终点——充分利用分析工具，并且不要害怕自己动手编写工具。

作者：[Sarah Mount](http://programmer.97things.oreilly.com/wiki/index.php/Sarah_Mount)