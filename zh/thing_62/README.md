# 只有代码会告诉你真相

程序的最终语义是由运行的代码给出的。如果代码只有二进制形式，那么阅读起来将会非常困难！然而，如果你正在编写自己的程序、参与典型的商业软件开发、开源项目，或者使用动态解释型语言编写代码，源代码应该是可用的。通过查看源代码，程序的含义应该是显而易见的。要知道一个程序在做什么，源代码是你唯一可以确信的东西。即使是最准确的需求文档也无法告诉你全部真相：它并不包含程序实际执行的详细故事，而只是需求分析师的高层意图。设计文档可能捕捉了计划中的设计，但它缺乏实现的必要细节。这些文档可能与当前的实现不同步……或者可能已经丢失。或者从一开始就没有写下来。源代码可能是唯一剩下的东西。

考虑到这一点，问问自己，你的代码是否清晰地告诉了你或其他程序员它在做什么？

你可能会说：“哦，我的注释会告诉你所有你需要知道的东西。”但请记住，注释并不是运行的代码。它们可能和其他形式的文档一样是错误的。有一种传统观点认为注释是无条件的好东西，因此一些程序员不加思索地写越来越多的注释，甚至重复解释代码中已经显而易见的琐碎细节。这是澄清代码的错误方式。如果你的代码需要注释，考虑重构它，使其不需要注释。冗长的注释会占用屏幕空间，甚至可能被你的IDE自动隐藏。如果你需要解释某个更改，请在版本控制系统的提交信息中说明，而不是在代码中。

你能做些什么来让你的代码尽可能清晰地表达真相呢？努力为代码取好名字。根据功能的内聚性来组织代码，这也有助于命名。解耦你的代码以实现正交性。编写自动化测试来解释预期的行为并检查接口。当你学会如何编写更简单、更好的解决方案时，无情地进行重构。让你的代码尽可能简单易读。

像对待其他作品一样对待你的代码，比如一首诗、一篇文章、一篇公开博客或一封重要的电子邮件。精心雕琢你所表达的内容，使其能够完成它应该做的事情，并尽可能直接地传达它在做什么，这样即使你不在场，它仍然能传达你的意图。记住，有用的代码的使用时间往往比预期的要长得多。维护程序员会感谢你。而且，如果你是一名维护程序员，而你正在处理的代码不容易传达真相，请主动应用上述准则。在代码中建立一些理智，并保持你自己的理智。

作者：[Peter Sommerlad](http://programmer.97things.oreilly.com/wiki/index.php/Peter_Sommerlad)