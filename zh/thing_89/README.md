#使用正确的算法和数据结构

一家拥有多家分行的大银行抱怨说，它为柜员购买的新电脑速度太慢。那是在每个人都使用电子银行之前，自动取款机还没有像现在这样普及。人们访问银行的频率会高得多，而速度慢的电脑让人们排队。因此，银行威胁要解除与供应商的合同。

>供应商派了性能分析和调优专家来确定延迟的原因。他很快发现，在终端上运行的一个特定程序几乎消耗了所有的CPU容量。使用分析工具，他放大了程序，他可以看到罪魁祸首的函数。源代码为：

>`
>for(i=0；i<strlen(S)；++i){
>如果(...S[我])……
>}
>`

>和字符串S的平均长度为几千个字符。代码(由银行编写)很快就被更改了，银行出纳员从此幸福地生活着……

程序员不应该做得更好，而不是使用不必要的平方缩放的代码吗？
每次对strlen的调用都会遍历字符串中数千个字符中的每一个，以查找其终止空字符。然而，这根弦从未改变。通过提前确定其长度，程序员可以节省数千次对strlen的调用(以及数百万次循环执行)：

```
N=斯特伦(S)；
对于(i=0；i<n；++i){
如果(……S[我])……
}
```

每个人都知道这样一句谚语：先让它工作，然后让它快速工作，以避免微优化的陷阱。但上面的例子几乎会让您相信，程序员遵循了马基雅维利柔板“首先让它慢慢工作”。

这种粗心大意的事情你可能会不止一次遇到。而且，这不仅仅是一个“不要重新发明轮子”的问题。有时，新手程序员只是在没有真正思考的情况下就开始不停地打字，突然他们就“发明”了泡泡排序。他们甚至可能在吹嘘这一点。

选择正确算法的另一个方面是数据结构的选择。它可以产生很大的不同：与散列数据结构或二叉树相比，对您想要搜索的100万个项的集合使用链表将对用户对您的编程的欣赏产生重大影响。

程序员不应该重新发明轮子，应该尽可能地使用现有的库。但为了能够避免像银行那样的问题，他们还应该学习算法及其如何扩展。仅仅是现代文本编辑器中的花哨让它们变得和20世纪80年代的WordStar这样的老式程序一样慢吗？许多人说，编程中的重用是最重要的。然而，最重要的是，程序员应该知道何时、什么以及如何重用。为了能够做到这一点，他们应该拥有问题领域以及算法和数据结构的知识。

一个好的程序员还应该知道什么时候使用糟糕的算法。例如，如果问题域规定永远不能超过五个项目(就像Yahtzee游戏中的骰子数量)，您就知道您“总是”最多必须对五个项目进行排序。在这种情况下，冒泡排序实际上可能是对项目进行排序的最有效方式。人人都有得意日。

所以，读一些好书--并确保你理解了它们。如果你真的读过唐纳德·努斯的《计算机编程的艺术》，那么你甚至可能是幸运的：找到作者的一个错误，赢得一张唐·克努斯的十六进制美元(2.56美元)支票。

作者：[JC Van Winkel](http://programmer.97things.oreilly.com/wiki/index.php/JC_van_Winkel)
