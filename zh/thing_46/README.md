#知道你的极限

>*“男人必须知道自己的局限性。”--“肮脏的哈利”*

你的资源是有限的。你只有这么多的时间和金钱来做你的工作，包括更新你的知识、技能和工具所需的时间和金钱。你只能如此努力、如此快速、如此聪明、如此漫长。你的工具就这么强大。你的目标机器只有这么强大。因此，你必须尊重你的资源的限制。

如何尊重这些限制？了解你自己，了解你的人，了解你的预算，了解你的东西。作为一名软件工程师，尤其要了解数据结构和算法的空间和时间复杂性，以及系统的体系结构和性能特征。您的工作是创建软件和系统的最佳结合。

空间和时间复杂度被给出为函数*O(f(N))*，对于n等于输入的大小，它是当n增长到无穷大时所需的渐近空间或时间。*f(N)*的重要复杂性类包括*ln(N)*、*n*、*n ln(N)*、*n<sup>e</sup>*和*e<sup>n</sup>*。如图所示，当*n*变大时，*O(ln(N))*比*O(N)*和*O(n ln(N))*小得多，它们比*O(n<sup>e</sup>)*和*O(e<sup>n</sup>)*小得多。正如Sean Parent所说，对于可实现的n个复杂程度，所有的复杂程度都是近乎恒定的、近线性的或近乎无限的。

！[](http://programmer.97things.oreilly.com/wiki/images/c/c0/Clearly.jpeg)

|访问时间|容量
-|-：
注册|<1 ns|64b
缓存线||64B
一级缓存|1 ns|KB
二级缓存|4 ns|8MB
内存|20 ns|32 GB
磁盘|10ms|10TB
局域网|20ms|>1PB
互联网|100ms|>1ZB

复杂性分析是以抽象机器的形式进行的，但软件运行在真实的机器上。现代计算机系统被组织为物理和虚拟机器的层次结构，包括语言运行时、操作系统、CPU、高速缓冲存储器、随机存取存储器、磁盘驱动器和网络。第一个表显示了典型联网服务器的随机访问时间和存储容量限制。

请注意，容量和速度会有几个数量级的差异。我们的系统的每个级别都大量使用缓存和前视来隐藏这种变化，但它们只有在访问可预测的情况下才起作用。当缓存未命中频繁时，系统将出现抖动。例如，随机检查硬盘上的每个字节可能需要32年时间。即使随机检查RAM中的每个字节也可能需要11分钟。随机访问是不可预测的。是什么?这取决于系统，但重新访问最近使用的项目并按顺序访问项目通常是一种成功。

算法和数据结构在使用缓存的效率方面各不相同。例如：
-线性搜索很好地利用了前瞻，但需要*O(N)*个比较。
-排序数组的二进制搜索只需要*O(log(N))*个比较。
-对van Emde Boas树的搜索是*O(log(N))*并且与缓存无关。


Elements|搜索时间(Ns)||
|：--------|-----------：|-----------：|--------：|
|**线性**|**二进制**|**VEB**
8|50|90|40
|180|150|70
512|1200|230|100
4096|17000|320|160


如何选择？归根结底，通过测量。第二个表显示了通过这三种方法搜索位整数数组所需的时间。在我的电脑上：
-线性搜索在小型阵列中具有竞争力，但在大型阵列中会以指数级输掉。
-Van Emde Boas凭借其可预测的访问模式轻松获胜。

>*“你付钱，你做你的选择。”--[Punch](http://www.nytimes.com/1988/02/28/magazine/on-language-you-pays-yer-money.html?pagewanted=all)*

作者：Greg Colvin](http://programmer.97things.oreilly.com/wiki/index.php/Greg_Colvin)
