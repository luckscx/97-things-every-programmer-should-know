#领域特定语言

每当你听到任何领域专家的讨论，无论是棋手、幼儿园教师还是保险代理人，你都会注意到他们的词汇与日常语言有很大的不同。这就是领域特定语言(DSL)的一部分：特定领域有专门的词汇表来描述该领域特定的事物。

在软件世界中，DSL是关于特定于特定领域的语言中的可执行表达式，该领域的词汇和语法是可读、可理解的，并且--希望--领域专家可写。针对软件开发人员或科学家的DSL已经存在很长时间了。例如，在配置文件中找到的Unix“小语言”和使用LISP宏的功能创建的语言就是一些较老的例子。

DSL通常分为*内部*或*外部*两类：

-**内部DSL**是用通用编程语言编写的，其语法已经过调整，看起来更像自然语言。对于提供更多语法糖和格式可能性的语言(例如Ruby和Scala)来说，这比对于其他语言(例如Java)更容易。大多数内部DSL包装了现有的API、库或业务代码，并提供了一个包装器，以减少对功能的繁琐访问。只需运行它们，它们就可以直接执行。根据实现和域的不同，它们用于构建数据结构、定义依赖项、运行进程或任务、与其他系统通信或验证用户输入。内部DSL的语法受宿主语言的限制。有许多模式-例如，表达式构建器、方法链接和注释-可以帮助您将宿主语言转变为您的DSL。如果宿主语言不需要重新编译，则可以与领域专家并肩工作，非常快速地开发内部DSL。

-**外部DSL**是语言的文本或图形表达--尽管文本DSL往往比图形DSL更常见。文本表达式可以由工具链处理，该工具链包括词法分析器、解析器、模型转换器、生成器和任何其他类型的后处理。外部DSL大多被读入内部模型，这些模型构成进一步处理的基础。定义语法是很有帮助的(例如，在EBNF中)。语法为生成工具链的各部分(例如，编辑器、可视化工具、语法分析器生成器)提供了起点。对于简单的DSL，手工解析器可能就足够了--例如，使用正则表达式。如果对定制解析器的要求太高，那么定制解析器可能会变得笨拙，因此查看专门为处理语言语法和DSL而设计的工具是有意义的--例如，OpenArchitecture、ANTlr、SableCC、andromda。将外部DSL定义为XML方言也很常见，尽管可读性通常是一个问题--特别是对于非技术性读者。

您必须始终将DSL的目标受众考虑在内。他们是开发人员、经理、业务客户还是最终用户？您必须调整语言的技术级别、可用的工具、语法帮助(例如，IntelliSense)、早期验证、可视化和表示以适应目标受众。通过隐藏技术细节，DSL可以增强用户的能力，使他们能够根据需要调整系统，而不需要开发人员的帮助。它还可以加快开发速度，因为在初始语言框架到位后，可能会分配工作。这种语言可以逐渐演变。现有的表达式和语法也有不同的迁移路径可用。

作者：[Michael Hunger](http://programmer.97things.oreilly.com/wiki/index.php/Michael_Hunger)