# 让接口易于正确使用，难以错误使用

软件开发中最常见的任务之一就是接口规范。接口出现在最高层次的抽象（用户界面）中，最低层次的抽象（函数接口）中，以及介于两者之间的层次（类接口、库接口等）中。无论你是与最终用户一起指定他们如何与系统交互，还是与开发人员一起指定API，或者声明类的私有函数，接口设计都是你工作的重要组成部分。如果你做得好，你的接口将易于使用，并能提高他人的生产力。如果你做得不好，你的接口将成为沮丧和错误的来源。

好的接口具有以下特点：

- **易于正确使用。** 使用设计良好的接口的人几乎总是能正确使用接口，因为这是最省力的路径。在图形用户界面（GUI）中，他们几乎总是点击正确的图标、按钮或菜单项，因为这是显而易见且容易做的事情。在API中，他们几乎总是传递正确的参数和值，因为这是最自然的方式。对于易于正确使用的接口，*事情就是能正常工作。*
- **难以错误使用。** 好的接口会预见到人们可能犯的错误，并使这些错误难以——理想情况下是不可能——发生。例如，GUI可能会禁用或删除在当前上下文中没有意义的命令，或者API可能会通过允许以任何顺序传递参数来消除参数顺序问题。

设计易于正确使用的接口的一个好方法是在它们存在之前就进行演练。在编写任何底层代码之前，模拟一个GUI——可能是在白板上或使用桌子上的索引卡片——并与之互动。在声明函数之前编写API调用。遍历常见的使用场景，并指定你*希望*接口如何行为。你*希望*能够点击什么？你*希望*能够传递什么？易于使用的接口感觉很自然，因为它们让你做你想做的事情。如果你从用户的角度开发这些接口，你更有可能想出这样的接口。（这种视角是测试驱动编程的优势之一。）

让接口难以错误使用需要两件事。首先，你必须预见到用户可能犯的错误，并找到防止这些错误的方法。其次，你必须观察在早期发布期间接口是如何被误用的，并修改接口——是的，修改接口！——以防止这些错误。防止错误使用的最佳方法是使这种使用变得不可能。如果用户一直想要撤销一个不可撤销的操作，尝试使该操作可撤销。如果他们一直向API传递错误的值，尽你所能修改API以接受用户想要传递的值。

最重要的是，记住接口的存在是为了方便用户，而不是实现者。

作者：[Scott Meyers](http://programmer.97things.oreilly.com/wiki/index.php/Scott_Meyers)